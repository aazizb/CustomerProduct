2025-03-20 07:36:46.750 +01:00 [INF] Now listening on: https://localhost:7157
2025-03-20 07:36:46.776 +01:00 [INF] Now listening on: http://localhost:5072
2025-03-20 07:36:46.835 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 07:36:46.837 +01:00 [INF] Hosting environment: Development
2025-03-20 07:36:46.838 +01:00 [INF] Content root path: C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api
2025-03-20 07:36:47.374 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2025-03-20 07:36:47.587 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 55.4279 ms
2025-03-20 07:36:47.595 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 230.1531ms
2025-03-20 07:36:47.622 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.js - null null
2025-03-20 07:36:47.622 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2025-03-20 07:36:47.624 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2025-03-20 07:36:47.633 +01:00 [INF] HTTP GET /swagger/index.js responded 200 in 1.3660 ms
2025-03-20 07:36:47.636 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.js - 200 null application/javascript;charset=utf-8 14.2928ms
2025-03-20 07:36:47.641 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 18.849ms
2025-03-20 07:36:47.677 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.7918ms
2025-03-20 07:36:47.707 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2025-03-20 07:36:47.720 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 10.3311 ms
2025-03-20 07:36:47.723 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.3546ms
2025-03-20 07:57:34.083 +01:00 [INF] Now listening on: https://localhost:7157
2025-03-20 07:57:34.110 +01:00 [INF] Now listening on: http://localhost:5072
2025-03-20 07:57:34.173 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 07:57:34.176 +01:00 [INF] Hosting environment: Development
2025-03-20 07:57:34.177 +01:00 [INF] Content root path: C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api
2025-03-20 07:57:34.763 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2025-03-20 07:57:34.903 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 50.2973 ms
2025-03-20 07:57:34.913 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 156.9674ms
2025-03-20 07:57:34.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2025-03-20 07:57:34.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2025-03-20 07:57:34.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.js - null null
2025-03-20 07:57:34.959 +01:00 [INF] HTTP GET /swagger/index.js responded 200 in 8.1987 ms
2025-03-20 07:57:34.964 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 28.718ms
2025-03-20 07:57:34.972 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.js - 200 null application/javascript;charset=utf-8 38.1175ms
2025-03-20 07:57:34.994 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.9992ms
2025-03-20 07:57:35.024 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2025-03-20 07:57:35.041 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 12.8278 ms
2025-03-20 07:57:35.046 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.0132ms
2025-03-20 07:57:55.739 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/api/Customer/all - null null
2025-03-20 07:57:55.747 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 07:57:55.770 +01:00 [INF] Route matched with {action = "Get", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CustomerProduct.Application.Features.Customers.CustomerListVm]]] GetAsync() on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 07:58:01.546 +01:00 [INF] Handling request: GetCustomerListQuery with data: {"$type":"GetCustomerListQuery"}
2025-03-20 07:58:03.055 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
2025-03-20 07:58:03.163 +01:00 [INF] Handled request: GetCustomerListQuery - Execution Time: 1612ms - Response: [{"CustomerId":1144,"GivenName":"Diao","FamilyName":"Dia","$type":"CustomerListVm"},{"CustomerId":0,"GivenName":"Gunter","FamilyName":"Bamberg","$type":"CustomerListVm"}]
2025-03-20 07:58:03.193 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CustomerProduct.Application.Features.Customers.CustomerListVm, CustomerProduct.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-20 07:58:03.209 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api) in 7434.0496ms
2025-03-20 07:58:03.211 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 07:58:03.213 +01:00 [INF] HTTP GET /api/Customer/all responded 200 in 7469.7405 ms
2025-03-20 07:58:03.222 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/api/Customer/all - 200 null application/json; charset=utf-8 7482.8212ms
2025-03-20 07:59:41.980 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7157/api/Customer/6 - null null
2025-03-20 07:59:41.991 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Delete (CustomerProduct.Api)'
2025-03-20 07:59:42.016 +01:00 [INF] Route matched with {action = "Delete", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:00:46.257 +01:00 [INF] Handling request: DeleteCustomerCommand with data: {"Id":6,"$type":"DeleteCustomerCommand"}
2025-03-20 08:00:51.814 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-20 08:00:51.937 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Customers]
OUTPUT 1
WHERE [Id] = @p0;
2025-03-20 08:00:51.968 +01:00 [INF] Handled request: DeleteCustomerCommand - Execution Time: 5704ms - Response: {"$type":"Unit"}
2025-03-20 08:01:07.984 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-20 08:01:07.986 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Delete (CustomerProduct.Api) in 85967.3734ms
2025-03-20 08:01:07.987 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Delete (CustomerProduct.Api)'
2025-03-20 08:01:07.989 +01:00 [INF] HTTP DELETE /api/Customer/6 responded 204 in 85997.2797 ms
2025-03-20 08:01:07.990 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7157/api/Customer/6 - 204 null null 86010.6952ms
2025-03-20 08:01:15.361 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/api/Customer/all - null null
2025-03-20 08:01:15.369 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:01:15.372 +01:00 [INF] Route matched with {action = "Get", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CustomerProduct.Application.Features.Customers.CustomerListVm]]] GetAsync() on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:01:15.376 +01:00 [INF] Handling request: GetCustomerListQuery with data: {"$type":"GetCustomerListQuery"}
2025-03-20 08:01:15.394 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
2025-03-20 08:01:15.398 +01:00 [INF] Handled request: GetCustomerListQuery - Execution Time: 20ms - Response: [{"CustomerId":1144,"GivenName":"Diao","FamilyName":"Dia","$type":"CustomerListVm"}]
2025-03-20 08:01:15.404 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CustomerProduct.Application.Features.Customers.CustomerListVm, CustomerProduct.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-20 08:01:15.406 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api) in 30.82ms
2025-03-20 08:01:15.407 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:01:15.408 +01:00 [INF] HTTP GET /api/Customer/all responded 200 in 39.3231 ms
2025-03-20 08:01:15.411 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/api/Customer/all - 200 null application/json; charset=utf-8 50.281ms
2025-03-20 08:03:59.522 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7157/api/Customer - application/json 183
2025-03-20 08:03:59.530 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:03:59.534 +01:00 [INF] Route matched with {action = "Update", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(CustomerProduct.Application.Features.Customers.UpdateCustomerCommand) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:03:59.566 +01:00 [INF] Handling request: UpdateCustomerCommand with data: {"Id":1,"DocType":"Passport","DocNum":"785412X","Email":"dt@email.com","CustomerId":0,"GivenName":"dudu","FamilyName":"daw","Phone":"225-852-741-369","$type":"UpdateCustomerCommand"}
2025-03-20 08:03:59.599 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-20 08:03:59.710 +01:00 [ERR] Request UpdateCustomerCommand failed after 137ms with error: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
2025-03-20 08:03:59.818 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api) in 281.5021ms
2025-03-20 08:03:59.822 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:03:59.826 +01:00 [ERR] HTTP PUT /api/Customer responded 500 in 296.1801 ms
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
   at CustomerProduct.Api.Controllers.CustomerController.Update(UpdateCustomerCommand updateCustomerCommand) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api\Controllers\CustomerController.cs:line 29
   at lambda_method136(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-20 08:03:59.842 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
   at CustomerProduct.Api.Controllers.CustomerController.Update(UpdateCustomerCommand updateCustomerCommand) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api\Controllers\CustomerController.cs:line 29
   at lambda_method136(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 08:03:59.865 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7157/api/Customer - 500 null text/plain; charset=utf-8 344.6227ms
2025-03-20 08:20:40.255 +01:00 [INF] Now listening on: https://localhost:7157
2025-03-20 08:20:40.282 +01:00 [INF] Now listening on: http://localhost:5072
2025-03-20 08:20:40.342 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 08:20:40.345 +01:00 [INF] Hosting environment: Development
2025-03-20 08:20:40.346 +01:00 [INF] Content root path: C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api
2025-03-20 08:20:40.966 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2025-03-20 08:20:41.121 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 62.0370 ms
2025-03-20 08:20:41.128 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 171.351ms
2025-03-20 08:20:41.148 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2025-03-20 08:20:41.148 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.js - null null
2025-03-20 08:20:41.151 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2025-03-20 08:20:41.154 +01:00 [INF] HTTP GET /swagger/index.js responded 200 in 1.1597 ms
2025-03-20 08:20:41.159 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.js - 200 null application/javascript;charset=utf-8 11.7268ms
2025-03-20 08:20:41.167 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 17.0739ms
2025-03-20 08:20:41.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.2658ms
2025-03-20 08:20:41.226 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2025-03-20 08:20:41.238 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 8.8318 ms
2025-03-20 08:20:41.243 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.2524ms
2025-03-20 08:20:47.907 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/api/Customer/all - null null
2025-03-20 08:20:47.916 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:20:47.934 +01:00 [INF] Route matched with {action = "Get", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CustomerProduct.Application.Features.Customers.CustomerListVm]]] GetAsync() on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:20:47.942 +01:00 [INF] Handling request: GetCustomerListQuery with data: {"$type":"GetCustomerListQuery"}
2025-03-20 08:20:49.542 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
2025-03-20 08:20:49.644 +01:00 [INF] Handled request: GetCustomerListQuery - Execution Time: 1694ms - Response: [{"CustomerId":1144,"GivenName":"Diao","FamilyName":"Dia","$type":"CustomerListVm"}]
2025-03-20 08:20:49.663 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CustomerProduct.Application.Features.Customers.CustomerListVm, CustomerProduct.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-20 08:20:49.684 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api) in 1743.5228ms
2025-03-20 08:20:49.688 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:20:49.690 +01:00 [INF] HTTP GET /api/Customer/all responded 200 in 1776.9077 ms
2025-03-20 08:20:49.699 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/api/Customer/all - 200 null application/json; charset=utf-8 1793.1341ms
2025-03-20 08:23:33.585 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Customer - application/json 193
2025-03-20 08:23:33.602 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api)'
2025-03-20 08:23:33.611 +01:00 [INF] Route matched with {action = "Create", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CustomerProduct.Application.Features.Customers.CreateCustomerCommandResponse]] Create(CustomerProduct.Application.Features.Customers.CreateCustomerCommand) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:23:33.660 +01:00 [INF] Handling request: CreateCustomerCommand with data: {"DocType":"DNI","DocNum":"X-456987123-Z","Email":"gunterbamberg@email.com","CustomerId":101425,"GivenName":"Gunter","FamilyName":"Bamberg","Phone":"+49 741852963","$type":"CreateCustomerCommand"}
2025-03-20 08:23:33.899 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([CustomerId], [DocNum], [DocType], [Email], [FamilyName], [GivenName], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-03-20 08:23:33.932 +01:00 [INF] Handled request: CreateCustomerCommand - Execution Time: 262ms - Response: {"Customer":{"CustomerId":101425,"GivenName":"Gunter","FamilyName":"Bamberg","$type":"CreateCustomerDto"},"Success":true,"Message":"","ValidationErrors":null,"$type":"CreateCustomerCommandResponse"}
2025-03-20 08:23:33.940 +01:00 [INF] Executing OkObjectResult, writing value of type 'CustomerProduct.Application.Features.Customers.CreateCustomerCommandResponse'.
2025-03-20 08:23:33.944 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api) in 330.4253ms
2025-03-20 08:23:33.945 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api)'
2025-03-20 08:23:33.948 +01:00 [INF] HTTP POST /api/Customer responded 200 in 346.6000 ms
2025-03-20 08:23:33.950 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Customer - 200 null application/json; charset=utf-8 364.8762ms
2025-03-20 08:26:29.181 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7157/api/Customer - application/json 191
2025-03-20 08:26:29.187 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:26:29.195 +01:00 [INF] Route matched with {action = "Update", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(CustomerProduct.Application.Features.Customers.UpdateCustomerCommand) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:26:50.040 +01:00 [INF] Handling request: UpdateCustomerCommand with data: {"Id":7,"DocType":"NIE","DocNum":"852741-V","Email":"gb@email.com","CustomerId":8529630,"GivenName":"Ginter","FamilyName":"Bamberg","Phone":"+34 254 368 741","$type":"UpdateCustomerCommand"}
2025-03-20 08:26:50.192 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-20 08:26:56.740 +01:00 [ERR] Request UpdateCustomerCommand failed after 6691ms with error: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
2025-03-20 08:26:56.849 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api) in 27651.2985ms
2025-03-20 08:26:56.851 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:26:56.853 +01:00 [ERR] HTTP PUT /api/Customer responded 500 in 27665.7727 ms
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
   at CustomerProduct.Api.Controllers.CustomerController.Update(UpdateCustomerCommand updateCustomerCommand) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api\Controllers\CustomerController.cs:line 29
   at lambda_method133(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-20 08:26:56.868 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The property 'Customer.CustomerId' is part of a key and so cannot be modified or marked as modified. To change the principal of an existing entity with an identifying foreign key, first delete the dependent and invoke 'SaveChanges', and then associate the dependent with the new principal.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetPropertyModified(IProperty property, Boolean changeState, Boolean isModified, Boolean isConceptualNull, Boolean acceptChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectValueChange(InternalEntityEntry entry, IProperty property)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.LocalDetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry, HashSet`1 visited)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.ChangeDetector.DetectChanges(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.DetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges(EntityEntry entry)
   at Microsoft.EntityFrameworkCore.DbContext.Entry[TEntity](TEntity entity)
   at CustomerProduct.Persistence.Repositories.GenericRepository`1.UpdateAsync(T entity) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Persistence\Repositories\GenericRepository.cs:line 37
   at CustomerProduct.Application.Features.Customers.Commands.Update.UpdateCustomerCommandHandler.Handle(UpdateCustomerCommand request, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Application\Features\Customers\Commands\Update\UpdateCustomerCommandHandler.cs:line 26
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at CustomerProduct.Infrastructure.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Infrastructure\Behaviors\LoggingBehavior.cs:line 26
   at CustomerProduct.Api.Controllers.CustomerController.Update(UpdateCustomerCommand updateCustomerCommand) in C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api\Controllers\CustomerController.cs:line 29
   at lambda_method133(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 08:26:56.888 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7157/api/Customer - 500 null text/plain; charset=utf-8 27712.2198ms
2025-03-20 08:40:20.993 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:40:21.018 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 08:40:21.033 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-03-20 08:40:21.070 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-03-20 08:40:21.075 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:40:21.076 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-03-20 08:40:21.080 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-03-20 08:40:21.086 +01:00 [INF] Applying migration '20250319100257_initialdb'.
2025-03-20 08:40:21.106 +01:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] int NOT NULL IDENTITY,
    [DocType] nvarchar(max) NOT NULL,
    [DocNum] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CustomerId] int NOT NULL,
    [GivenName] nvarchar(max) NOT NULL,
    [FamilyName] nvarchar(max) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [AK_Customers_CustomerId] UNIQUE ([CustomerId])
);
2025-03-20 08:45:28.076 +01:00 [INF] Executed DbCommand (179ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [new_dbx];
2025-03-20 08:45:28.163 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [new_dbx] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-03-20 08:45:28.176 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:45:28.179 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 08:45:28.193 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-03-20 08:45:28.239 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-03-20 08:45:28.245 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:45:28.246 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-03-20 08:45:28.251 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-03-20 08:45:28.258 +01:00 [INF] Applying migration '20250320074509_initialDb'.
2025-03-20 08:45:28.269 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] int NOT NULL IDENTITY,
    [DocType] nvarchar(max) NOT NULL,
    [DocNum] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CustomerId] int NOT NULL,
    [GivenName] nvarchar(max) NOT NULL,
    [FamilyName] nvarchar(max) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [AK_Customers_CustomerId] UNIQUE ([CustomerId])
);
2025-03-20 08:45:28.271 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] int NOT NULL IDENTITY,
    [ProductName] nvarchar(max) NOT NULL,
    [ProductTypeName] nvarchar(max) NOT NULL,
    [NumeracioTerminal] int NOT NULL,
    [SoldAt] nvarchar(max) NOT NULL,
    [CustomerId] int NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Products_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([CustomerId]) ON DELETE CASCADE
);
2025-03-20 08:45:28.273 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Customers_CustomerId] ON [Customers] ([CustomerId]);
2025-03-20 08:45:28.274 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Products_CustomerId] ON [Products] ([CustomerId]);
2025-03-20 08:45:28.276 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250320074509_initialDb', N'9.0.3');
2025-03-20 08:45:28.279 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-03-20 08:46:54.414 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:46:54.438 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 08:46:54.449 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-03-20 08:46:54.486 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-03-20 08:46:54.491 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-20 08:46:54.492 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-03-20 08:46:54.494 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-03-20 08:46:54.500 +01:00 [INF] Applying migration '20250320074644_updateCustomer'.
2025-03-20 08:46:54.525 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Products] DROP CONSTRAINT [FK_Products_Customers_CustomerId];
2025-03-20 08:46:54.528 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customers] DROP CONSTRAINT [AK_Customers_CustomerId];
2025-03-20 08:46:54.530 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Products] ADD CONSTRAINT [FK_Products_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE CASCADE;
2025-03-20 08:46:54.532 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250320074644_updateCustomer', N'9.0.3');
2025-03-20 08:46:54.534 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-03-20 08:47:21.108 +01:00 [INF] Now listening on: https://localhost:7157
2025-03-20 08:47:21.144 +01:00 [INF] Now listening on: http://localhost:5072
2025-03-20 08:47:21.205 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 08:47:21.207 +01:00 [INF] Hosting environment: Development
2025-03-20 08:47:21.209 +01:00 [INF] Content root path: C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api
2025-03-20 08:47:21.543 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2025-03-20 08:47:21.690 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 48.5979 ms
2025-03-20 08:47:21.697 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 159.9627ms
2025-03-20 08:47:21.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2025-03-20 08:47:21.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2025-03-20 08:47:21.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.js - null null
2025-03-20 08:47:21.745 +01:00 [INF] HTTP GET /swagger/index.js responded 200 in 15.7603 ms
2025-03-20 08:47:21.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 36.9954ms
2025-03-20 08:47:21.760 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.js - 200 null application/javascript;charset=utf-8 39.7935ms
2025-03-20 08:47:21.785 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.958ms
2025-03-20 08:47:21.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2025-03-20 08:47:21.849 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 10.0305 ms
2025-03-20 08:47:21.855 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.8227ms
2025-03-20 08:48:49.382 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Customer - application/json 175
2025-03-20 08:48:49.398 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api)'
2025-03-20 08:48:49.418 +01:00 [INF] Route matched with {action = "Create", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CustomerProduct.Application.Features.Customers.CreateCustomerCommandResponse]] Create(CustomerProduct.Application.Features.Customers.CreateCustomerCommand) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:48:49.464 +01:00 [INF] Handling request: CreateCustomerCommand with data: {"DocType":"NIE","DocNum":"14521789Q","Email":"dd@email.com","CustomerId":52859630,"GivenName":"Diao","FamilyName":"Dia","Phone":"+225 963852147","$type":"CreateCustomerCommand"}
2025-03-20 08:48:51.040 +01:00 [INF] Executed DbCommand (71ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([CustomerId], [DocNum], [DocType], [Email], [FamilyName], [GivenName], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-03-20 08:48:51.089 +01:00 [INF] Handled request: CreateCustomerCommand - Execution Time: 1615ms - Response: {"Customer":{"CustomerId":52859630,"GivenName":"Diao","FamilyName":"Dia","$type":"CreateCustomerDto"},"Success":true,"Message":"","ValidationErrors":null,"$type":"CreateCustomerCommandResponse"}
2025-03-20 08:48:51.107 +01:00 [INF] Executing OkObjectResult, writing value of type 'CustomerProduct.Application.Features.Customers.CreateCustomerCommandResponse'.
2025-03-20 08:48:51.121 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api) in 1697.9034ms
2025-03-20 08:48:51.123 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Create (CustomerProduct.Api)'
2025-03-20 08:48:51.126 +01:00 [INF] HTTP POST /api/Customer responded 200 in 1730.3152 ms
2025-03-20 08:48:51.137 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Customer - 200 null application/json; charset=utf-8 1754.5895ms
2025-03-20 08:49:06.919 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/api/Customer/all - null null
2025-03-20 08:49:06.924 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:49:06.932 +01:00 [INF] Route matched with {action = "Get", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CustomerProduct.Application.Features.Customers.CustomerListVm]]] GetAsync() on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:49:06.936 +01:00 [INF] Handling request: GetCustomerListQuery with data: {"$type":"GetCustomerListQuery"}
2025-03-20 08:49:07.293 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
2025-03-20 08:49:07.323 +01:00 [INF] Handled request: GetCustomerListQuery - Execution Time: 384ms - Response: [{"CustomerId":52859630,"GivenName":"Diao","FamilyName":"Dia","$type":"CustomerListVm"}]
2025-03-20 08:49:07.333 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CustomerProduct.Application.Features.Customers.CustomerListVm, CustomerProduct.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-20 08:49:07.338 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api) in 403.4795ms
2025-03-20 08:49:07.342 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:49:07.345 +01:00 [INF] HTTP GET /api/Customer/all responded 200 in 420.5287 ms
2025-03-20 08:49:07.349 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/api/Customer/all - 200 null application/json; charset=utf-8 430.6111ms
2025-03-20 08:49:57.635 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/api/Customer/all - null null
2025-03-20 08:49:57.645 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:49:57.647 +01:00 [INF] Route matched with {action = "Get", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CustomerProduct.Application.Features.Customers.CustomerListVm]]] GetAsync() on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:49:57.649 +01:00 [INF] Handling request: GetCustomerListQuery with data: {"$type":"GetCustomerListQuery"}
2025-03-20 08:49:57.669 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
2025-03-20 08:49:57.675 +01:00 [INF] Handled request: GetCustomerListQuery - Execution Time: 24ms - Response: [{"CustomerId":52859630,"GivenName":"Diao","FamilyName":"Dia","$type":"CustomerListVm"}]
2025-03-20 08:49:57.679 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CustomerProduct.Application.Features.Customers.CustomerListVm, CustomerProduct.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-20 08:49:57.680 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api) in 31.8527ms
2025-03-20 08:49:57.682 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.GetAsync (CustomerProduct.Api)'
2025-03-20 08:49:57.683 +01:00 [INF] HTTP GET /api/Customer/all responded 200 in 37.7301 ms
2025-03-20 08:49:57.684 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/api/Customer/all - 200 null application/json; charset=utf-8 49.704ms
2025-03-20 08:51:50.384 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7157/api/Customer - application/json 190
2025-03-20 08:51:50.391 +01:00 [INF] Executing endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:51:50.396 +01:00 [INF] Route matched with {action = "Update", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Update(CustomerProduct.Application.Features.Customers.UpdateCustomerCommand) on controller CustomerProduct.Api.Controllers.CustomerController (CustomerProduct.Api).
2025-03-20 08:51:54.051 +01:00 [INF] Handling request: UpdateCustomerCommand with data: {"Id":1,"DocType":"NIE","DocNum":"852741-V","Email":"diaodia@email.com","CustomerId":8529630,"GivenName":"Diao","FamilyName":"Dia","Phone":"+34 254 368 741","$type":"UpdateCustomerCommand"}
2025-03-20 08:51:54.177 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CustomerId], [c].[DocNum], [c].[DocType], [c].[Email], [c].[FamilyName], [c].[GivenName], [c].[Phone]
FROM [Customers] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-20 08:51:54.204 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Customers] SET [CustomerId] = @p0, [DocNum] = @p1, [DocType] = @p2, [Email] = @p3, [FamilyName] = @p4, [GivenName] = @p5, [Phone] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-03-20 08:51:54.214 +01:00 [INF] Handled request: UpdateCustomerCommand - Execution Time: 154ms - Response: {"$type":"Unit"}
2025-03-20 08:51:54.224 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-20 08:51:54.226 +01:00 [INF] Executed action CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api) in 3827.6471ms
2025-03-20 08:51:54.230 +01:00 [INF] Executed endpoint 'CustomerProduct.Api.Controllers.CustomerController.Update (CustomerProduct.Api)'
2025-03-20 08:51:54.231 +01:00 [INF] HTTP PUT /api/Customer responded 204 in 3839.5490 ms
2025-03-20 08:51:54.235 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7157/api/Customer - 204 null null 3852.6126ms
2025-03-20 09:58:41.764 +01:00 [INF] Now listening on: https://localhost:7157
2025-03-20 09:58:41.794 +01:00 [INF] Now listening on: http://localhost:5072
2025-03-20 09:58:41.860 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 09:58:41.861 +01:00 [INF] Hosting environment: Development
2025-03-20 09:58:41.862 +01:00 [INF] Content root path: C:\Users\aaziz\source\repos\CustomerProduct\CustomerProduct.Api
2025-03-20 09:58:42.454 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2025-03-20 09:58:42.622 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 42.2555 ms
2025-03-20 09:58:42.630 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 184.7905ms
2025-03-20 09:58:42.653 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2025-03-20 09:58:42.653 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.js - null null
2025-03-20 09:58:42.653 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2025-03-20 09:58:42.671 +01:00 [INF] HTTP GET /swagger/index.js responded 200 in 6.5788 ms
2025-03-20 09:58:42.682 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 28.9615ms
2025-03-20 09:58:42.683 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.js - 200 null application/javascript;charset=utf-8 30.0434ms
2025-03-20 09:58:42.734 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.8186ms
2025-03-20 09:58:42.773 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2025-03-20 09:58:42.794 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 17.2719 ms
2025-03-20 09:58:42.800 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.8035ms
